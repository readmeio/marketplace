// ---
// title: "AdvancedTable"
// description: "A table with advanced features."
// author: "@trishaprile"
// version: "1.0.0"
// ---

import { useState } from 'react';

export const AdvancedTable = ({ data }) => {
  const [query, setQuery] = useState('');

  const columns = Object.keys(data[0]);

  const filteredData = data.filter((row) =>
    columns.some((col) =>
      String(row[col] ?? '')
        .toLowerCase()
        .includes(query.toLowerCase())
    )
  );

  const handleExport = () => {
    window.print();
  };

  return (
    <div className="space-y-2">
      <div className="flex justify-between items-center">
        <input
          type="text"
          placeholder="Filter tableâ€¦"
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          className="px-3 py-1 border border-gray-300 bg-white rounded-md text-gray-800 w-50"
        />

        <button
          onClick={handleExport}
          className="px-2 py-1 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-200"
        >
          <i className="fa fa-file-csv text-gray-500" />
        </button>
      </div>

      {/* Table */}
      <div className="overflow-x-auto">
        <table className="min-w-full">
          <thead>
            <tr>
              {columns.map((col) => (
                <th
                  key={col}
                  className="text-left text-gray-500! dark:text-white!"
                >
                  {col.replace(/_/g, ' ')}
                </th>
              ))}
            </tr>
          </thead>
          <tbody>
            {filteredData.map((row, i) => (
              <tr key={i}>
                {columns.map((col) => (
                  <td key={col}>
                    {String(row[col] ?? '')}
                  </td>
                ))}
              </tr>
            ))}
            {filteredData.length === 0 && (
              <tr>
                <td
                  colSpan={columns.length}
                  className="text-gray-400"
                >
                  No matching results
                </td>
              </tr>
            )}
          </tbody>
        </table>
      </div>
    </div>
  );
};

<AdvancedTable
  data={[
    { Feature: 'Linter', Version: 'v1.0', Status: 'In Progress', 'Release Date': 'Oct 1, 2025' },
    { Feature: 'AI Agent', Version: 'v1.0', Status: 'Beta', 'Release Date': 'Aug 31, 2025' },
    { Feature: 'Components', Version: 'v3.2', Status: 'Complete', 'Release Date': 'Mar 1, 2025' },
    { Feature: 'Refactored UI', Version: 'v2.3', Status: 'Complete', 'Release Date': 'Feb 1, 2025' },
  ]}
/>
